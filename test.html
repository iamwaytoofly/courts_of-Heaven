<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Courts of Heaven Prayer App - Test</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@400;600;700&family=Montserrat:wght@300;400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/print-styles.css">
    <style>
        .test-console {
            background-color: #f5f5f5;
            border: 1px solid #ddd;
            border-radius: 5px;
            padding: 15px;
            margin: 20px 0;
            font-family: monospace;
            max-height: 300px;
            overflow-y: auto;
        }
        .test-console .success {
            color: green;
        }
        .test-console .error {
            color: red;
        }
        .test-header {
            background-color: #3a5a7d;
            color: white;
            padding: 10px 15px;
            border-radius: 5px 5px 0 0;
            margin-bottom: 0;
        }
        .test-controls {
            margin: 20px 0;
        }
    </style>
<script src="https://sites.super.myninja.ai/_assets/ninja-daytona-script.js"></script>
</head>
<body>
    <header>
        <div class="header-content">
            <h1>Courts of Heaven <span class="heavenly-accent">Prayer Generator</span></h1>
            <p class="tagline">Test Environment</p>
        </div>
    </header>

    <main>
        <div class="container">
            <div class="app-description">
                <h2>Test Environment for Courts of Heaven Prayer App</h2>
                <p>This page is used to test the functionality of the Courts of Heaven Prayer Generator.</p>
            </div>

            <div class="test-controls">
                <button id="run-tests" class="btn">
                    <i class="fas fa-vial"></i> Run Tests
                </button>
                <button id="go-to-app" class="btn btn-secondary" onclick="window.location.href='index.html'">
                    <i class="fas fa-arrow-right"></i> Go to App
                </button>
            </div>

            <h3 class="test-header">Test Console</h3>
            <div id="test-console" class="test-console">
                <!-- Test results will appear here -->
                <p>Click "Run Tests" to begin testing...</p>
            </div>

            <div class="prayer-generator">
                <h2 class="form-title">Manual Testing</h2>
                <form id="prayer-form">
                    <div class="form-group">
                        <label for="prayer-topic">Test Prayer Topic:</label>
                        <input type="text" id="prayer-topic" value="healing" placeholder="Enter your prayer topic or petition...">
                    </div>
                    <button type="button" id="generate-prayer" class="btn btn-block">
                        <i class="fas fa-pray"></i> Generate Test Prayer
                    </button>
                </form>
            </div>

            <div id="prayer-output" class="prayer-output hidden">
                <div class="prayer-content">
                    <div class="prayer-header">
                        <h3>Test Prayer Output</h3>
                    </div>
                    <div id="prayer-text" class="prayer-text">
                        <!-- Prayer will be generated here -->
                    </div>
                    <div class="prayer-actions">
                        <button id="save-prayer" class="btn">
                            <i class="fas fa-heart"></i> Test Save
                        </button>
                        <button id="verify-components" class="btn btn-secondary">
                            <i class="fas fa-check-circle"></i> Verify Components
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <footer>
        <div class="container">
            <p>Test Environment for Courts of Heaven Prayer Generator | &copy; 2025</p>
        </div>
    </footer>

    <script src="js/scriptures.js"></script>
    <script src="js/app.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const testConsole = document.getElementById('test-console');
            const runTestsBtn = document.getElementById('run-tests');
            const verifyComponentsBtn = document.getElementById('verify-components');
            
            // Test functions
            function testScripturesLoaded() {
                console.log("Testing scriptures loaded...");
                if (typeof scriptures !== 'undefined' && 
                    scriptures.approaching && 
                    scriptures.honoring && 
                    scriptures.confession && 
                    scriptures.presenting && 
                    scriptures.silencing && 
                    scriptures.judgment && 
                    scriptures.verdict && 
                    scriptures.angels) {
                    console.log("✓ Scriptures loaded successfully");
                    return true;
                } else {
                    console.error("✗ Scriptures not loaded correctly");
                    return false;
                }
            }
            
            function testPrayerGeneration() {
                console.log("Testing prayer generation...");
                
                const topic = "healing";
                
                // Select random scripture for each section
                const getRandomItem = (array) => array[Math.floor(Math.random() * array.length)];
                
                try {
                    const approachVerse = getRandomItem(scriptures.approaching);
                    const honorVerse = getRandomItem(scriptures.honoring);
                    const confessionVerse = getRandomItem(scriptures.confession);
                    const presentingVerse = getRandomItem(scriptures.presenting);
                    const silencingVerse = getRandomItem(scriptures.silencing);
                    const judgmentVerse = getRandomItem(scriptures.judgment);
                    const verdictVerse = getRandomItem(scriptures.verdict);
                    const angelsVerse = getRandomItem(scriptures.angels);
                    
                    const intro = getRandomItem(prayerIntros);
                    const closing = getRandomItem(prayerClosings);
                    
                    console.log("✓ Prayer components can be accessed");
                    return true;
                } catch (error) {
                    console.error(`✗ Prayer generation error: ${error.message}`);
                    return false;
                }
            }
            
            // Override console.log and console.error to display in test console
            const originalLog = console.log;
            const originalError = console.error;
            
            console.log = function(message) {
                const logElement = document.createElement('p');
                logElement.textContent = message;
                if (message.includes('✓')) {
                    logElement.classList.add('success');
                }
                testConsole.appendChild(logElement);
                testConsole.scrollTop = testConsole.scrollHeight;
                originalLog.apply(console, arguments);
            };
            
            console.error = function(message) {
                const logElement = document.createElement('p');
                logElement.textContent = message;
                logElement.classList.add('error');
                testConsole.appendChild(logElement);
                testConsole.scrollTop = testConsole.scrollHeight;
                originalError.apply(console, arguments);
            };
            
            // Run tests button
            runTestsBtn.addEventListener('click', function() {
                testConsole.innerHTML = '';
                console.log("Running tests...");
                testScripturesLoaded();
                testPrayerGeneration();
                console.log("Tests completed.");
            });
            
            // Verify components button
            verifyComponentsBtn.addEventListener('click', function() {
                const prayerText = document.getElementById('prayer-text').innerHTML;
                console.log("Verifying prayer components...");
                
                const components = [
                    "Approaching God's throne", 
                    "Honoring Him", 
                    "Confession and repentance", 
                    "Presenting your case", 
                    "Silencing the accuser", 
                    "Asking for judgment", 
                    "Receiving the verdict", 
                    "Dispatching angels"
                ];
                
                let allComponentsPresent = true;
                
                for (const component of components) {
                    if (prayerText.toLowerCase().includes(component.toLowerCase())) {
                        console.log(`✓ Component present: ${component}`);
                    } else {
                        console.error(`✗ Missing component: ${component}`);
                        allComponentsPresent = false;
                    }
                }
                
                if (allComponentsPresent) {
                    console.log("✓ All prayer components verified successfully");
                } else {
                    console.error("✗ Some prayer components are missing");
                }
            });
        });
    </script>
</body>
</html>
